{% extends 'core/base.html' %}
{% load humanize %}
{% block content %}
<div class="container" id="feedapp">
  <div class="columns">
    <div class="column is-12">
      <h1 class="title">{{user.username}}</h1>
      {% if user.tingerprofile.avatar %}
      <figure class="image is-128x128">
        <img src="{{ user.tingerprofile.avatar.url }}" alt="">
      </figure>
      <hr>
      {% endif %}
      <p>
        <a href="{% url 'followers' user.username %}">
        Followers: {{ user.tingerprofile.followed_by.count }}</a></p>
      <p>Follows: {{ user.tingerprofile.follows.count }}</p>

      {% if user !=  request.user %}
        {% if request.user.tingerprofile in user.tingerprofile.followed_by.all %}
        <a href="{% url 'unfollow_tinger' user.username %}" class="button is-danger">Unfollow</a>
        {% else %}
        <a href="{% url 'follow_tinger' user.username %}" class="button is-success">Follow</a>
        {% endif %}
      {% endif %}
    </div>
  </div>
  <div class="columns">
    <div class="column is-8">
      <div class="wrapper-tings">
        {% for ting in user.tings.all %}
          <div class="tings">
            <article class="media">
              <figure class="media-left">
                <p class="image is-64x64">
                  {% if ting.created_by.tingerprofile.avatar %}
                  <img src="{{ting.created_by.tingerprofile.avatar.url}}" alt="">
                  {% endif %}
                </p>
              </figure>

              <div class="media-content">
                <div class="content">
                  <p>
                    <strong>{{ting.created_by.username}}</strong>
                    <small>{{ting.created_at|naturaltime }}</small>
                    <br>
                    {{ting.body}}
                  </p>
                </div>
              </div>
            </article>
          </div>
        {% endfor %}

      </div>
    </div>
  </div>
</div>
{% endblock %}